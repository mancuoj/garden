---
title: You Might Not Need Axios
date: 2024-01-06
---

## Get JSON

With custom headers and error handler.

The `*` in the comment indicates the default option.

```js
function isOk(response) {
  return response.ok ? response.json() : Promise.reject('Failed to load data from server')
}

function getUsers(url) {
  fetch(url, {
    method: 'GET', // *GET, POST, PUT, DELETE, etc.
    credentials: 'include', // include, *same-origin, omit
    headers: {
      'Content-Type': 'application/json',
    },
  })
    .then(isOk)
    .then(console.table)
    .catch(console.err)
}

getUsers('https://jsonplaceholder.typicode.com/users')
```

The `credentials` option controls if your cookies are automatically included.

- `include` ensure browsers to send a request with credentials included on both same-origin and cross-origin calls
- `same-origin` send credentials if the request URL is on the same origin
- `omit` ensure browsers don't include credentials in the request

## Post JSON

```js
function postUser(url, data) {
  return fetch(url, {
    method: 'POST',
    credentials: 'same-origin',
    body: JSON.stringify(data), // match the 'Content-Type' header
    headers: {
      'Content-Type': 'application/json',
    },
  })
    .then(isOk)
    .catch(console.err)
}

postUser('https://jsonplaceholder.typicode.com/users', { name: 'John', age: 30 }).then((data) => console.log(data))
```

## Post HTML Form

```js
function postForm(url, sel) {
  const formData = new FormData(document.querySelector(sel))

  return fetch(url, {
    method: 'POST',
    body: formData, // automatically sets the 'Content-Type'
  })
    .then(isOk)
    .catch(console.err)
}
```


## Post Form Encoded Data

```js
function postFormData(url, data) {
  return fetch(url, {
    method: 'POST',
    body: new URLSearchParams(data),
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded',
    },
  })
    .then(isOk)
    .catch(console.error)
}
```


## Upload File





## Thank

- [Using the Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch)
- [You may not need Axios](https://danlevy.net/you-may-not-need-axios/)
- [JSONPlaceholder - Free Fake REST API](https://jsonplaceholder.typicode.com/)




