---
date: 2024-01-19
tags:
  - windows
  - wsl
---

## Install Clash First

- WSL2 + Ubuntu
- Add to your shell profile, such as `.bashrc` or `.zshrc`
- Recommended way

```zshrc
host_ip=$(cat /etc/resolv.conf | grep "nameserver" | cut -f 2 -d " ")
export all_proxy=http://$host_ip:7890
export http_proxy=http://$host_ip:7890
export https_proxy=http://$host_ip:7890
```

## Another Way

- `/etc/resolv.conf` was automatically generated by WSL
- Create `/etc/wsl.conf` and put the following lines in the file

```conf
[network]
generateResolvConf = false
```

- Run `wsl --shutdown`, restart WSL2
- Unlink resolv.conf `unlink /etc/resolv.conf`

## Thanks

- [Clash 中文网](https://clashcn.com/clash)
- [Fix DNS resolution in WSL2](https://gist.github.com/coltenkrauter/608cfe02319ce60facd76373249b8ca6)